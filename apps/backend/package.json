{
	"name": "@sitelink/backend",
	"version": "0.0.0",
	"main": "src/index.ts",
	"type": "module",
	"scripts": {
		"dev": "bun run dev:gen-config && wrangler dev --config wrangler.dev.json",
		"dev:network": "bun run dev:gen-config && wrangler dev --config wrangler.dev.json --host 0.0.0.0",
		"dev:gen-config": "bun -e \"const c=JSON.parse(require('fs').readFileSync('wrangler.json','utf8')); delete c.containers; require('fs').writeFileSync('wrangler.dev.json',JSON.stringify(c,null,2))\"",
		"deploy": "wrangler deploy",
		"cf-typegen": "wrangler types",
		"wrangler:state:reset": "rm -rf .wrangler/state && bun run db:migrate:local",
		"db:create": "wrangler d1 create sitelink-db",
		"db:generate": "better-auth generate --config ./auth.config.ts --yes",
		"db:migrate:local": "wrangler d1 migrations apply sitelink-db --local",
		"db:migrate:remote": "wrangler d1 migrations apply sitelink-db --remote",
		"db:reset:local": "rm -f .wrangler/state/v3/d1/miniflare-D1DatabaseObject/*.sqlite",
		"db:query:local": "wrangler d1 execute sitelink-db --local --command",
		"db:query:remote": "wrangler d1 execute sitelink-db --remote --command",
		"db:tables:local": "wrangler d1 execute sitelink-db --local --command \"SELECT name FROM sqlite_master WHERE type='table'\"",
		"db:tables:remote": "wrangler d1 execute sitelink-db --remote --command \"SELECT name FROM sqlite_master WHERE type='table'\"",
		"db:delete-test-user": "wrangler d1 execute sitelink-db --local --command \"DELETE FROM user WHERE email = 'test2@example.com'\"",
		"logs": "wrangler tail",
		"lint": "bun oxlint",
		"test": "vitest run",
		"test:unit": "vitest run src/__tests__/",
		"test:integration": "bun run db:migrate:local && docker compose -f container/docker-compose.yml up -d --wait && vitest run tests/integration/; result=$?; docker compose -f container/docker-compose.yml down; exit $result",
		"test:integration:no-container": "bun run db:migrate:local && vitest run tests/integration/",
		"test:ui": "vitest --ui",
		"test:watch": "vitest --watch",
		"test:coverage": "vitest --coverage",
		"test:upload": "bun scripts/test-upload.ts",
		"livestore:events": "bun scripts/view-eventlog.ts",
		"viewer": "bun --hot scripts/viewer-dev.ts",
		"dev:flask": "cd container && python server.py"
	},
	"dependencies": {
		"@better-auth/expo": "^1.4.10",
		"@cloudflare/containers": "^0.0.31",
		"@effect/platform": "catalog:effect",
		"@livestore/adapter-cloudflare": "catalog:livestore",
		"@livestore/adapter-web": "catalog:livestore",
		"@livestore/livestore": "catalog:livestore",
		"@livestore/sync-cf": "catalog:livestore",
		"@sitelink/domain": "workspace:*",
		"better-auth": "^1.4.10",
		"drizzle-orm": "^0.45.1",
		"effect": "catalog:effect"
	},
	"devDependencies": {
		"@better-auth/cli": "^1.4.10",
		"@cloudflare/vitest-pool-workers": "^0.12.1",
		"@types/node": "^25.0.3",
		"@types/react": "^18.3.5",
		"@types/react-dom": "^18.3.0",
		"better-sqlite3": "^11.0.0",
		"drizzle-kit": "^0.31.8",
		"openseadragon": "^5.0.0",
		"pmtiles": "^4.0.1",
		"react": "^18.3.1",
		"react-dom": "^18.3.1",
		"vitest": "^3.0.0",
		"wrangler": "^4.65.0"
	}
}
