# Project Creation Flow
# Creates a new project from the Projects screen
# Ends inside the project on the Plans tab (empty state)
#
# Environment variables:
#   PROJECT_NAME - Project name (default: Test Project)
#   PROJECT_ADDRESS - Project address (default: 123 Test St)
#
# Prerequisites:
#   - User must be logged in and on the Projects screen
#   - Run auth-signup.yaml or auth-login.yaml first

appId: host.exp.exponent
---
# Verify we're on the Projects screen
- assertVisible: 'Projects'

# Tap FAB or Create Project button (both work)
- runFlow:
    when:
      visible: 'Create Project'
    commands:
      - tapOn: 'Create Project'
- runFlow:
    when:
      notVisible: 'Create Project'
    commands:
      # FAB is the + button at bottom right
      - tapOn:
          point: '90%,90%'

# Wait for modal
- extendedWaitUntil:
    visible: 'New Project'
    timeout: 5000

# Fill project form
- tapOn: 'Project Name'
- inputText: ${PROJECT_NAME:-Test Project}
- tapOn: 'Address (Optional)'
- inputText: ${PROJECT_ADDRESS:-123 Test St}

# Create project
- tapOn:
    text: 'Create Project'
    index: 1
- waitForAnimationToEnd

# Verify we're inside the project
- extendedWaitUntil:
    visible: 'Plans'
    timeout: 10000
- assertVisible: 'Media'
- assertVisible: 'Activity'
- assertVisible: 'No Plans Yet'
